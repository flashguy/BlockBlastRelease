System.register("chunks:///_virtual/BlocksPrefabs.ts",["cc"],(function(e){var s,r;return{setters:[function(e){s=e.cclegacy,r=e._decorator}],execute:function(){var t,c;s._RF.push({},"a762fsc/+dCir2IctnRXr1e","BlocksPrefabs",void 0);var n=r.ccclass;r.property,e("BlocksPrefabs",n("BlocksPrefabs")(((c=function(){function e(){}return e.setPrefabs=function(e){this._bloсksPrefabs=e},e.getblocksPrefabs=function(){return this._bloсksPrefabs},e.getBlockPrefabByType=function(e){return this._bloсksPrefabs[e]},e.getLength=function(){return this._bloсksPrefabs.length},e}())._bloсksPrefabs=void 0,t=c))||t);s._RF.pop()}}}));

System.register("chunks:///_virtual/BonusItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEnumerations.ts"],(function(e){var t,i,n,r,o,c,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e._decorator,o=e.SpriteFrame,c=e.Vec3,a=e.EventHandler},function(e){u=e.BonusType}],execute:function(){var l,s,p,f,b,y,m,h,v,g,B,w;n._RF.push({},"a7fcfIXaQFL45CUJ/YMLbOv","BonusItem",void 0);var z=r.ccclass,d=r.property;e("BonusItem",(l=z("BonusItem"),s=d({type:u}),p=d(o),f=d(c),b=d([a]),l((h=t((m=function(){i(this,"type",h,this),i(this,"price",v,this),i(this,"icon",g,this),i(this,"iconScale",B,this),i(this,"clickEvents",w,this)}).prototype,"type",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.BOMB}}),v=t(m.prototype,"price",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=t(m.prototype,"icon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(m.prototype,"iconScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(1,1,1)}}),w=t(m.prototype,"clickEvents",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=m))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/BonusItemScript.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,r,a,l,o,c,s,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Node,c=e.Label,s=e.Sprite,p=e.Component}],execute:function(){var u,b,m,h,f,g,v,y,_;a._RF.push({},"cd526mQHMlAf7eyBn+msxfX","BonusItemScript",void 0);var d=l.ccclass,S=l.property;e("BonusItemScript",(u=d("BonusItemScript"),b=S(o),m=S(o),h=S(c),u((v=i((g=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a))||this,n(i,"bg",v,r(i)),n(i,"icon",y,r(i)),n(i,"label",_,r(i)),i._item=void 0,i._available=!1,i}t(i,e);var a=i.prototype;return a.init=function(e){this._item=e,this.label.string=e.price.toString(),this.icon.addComponent(s).spriteFrame=e.icon,this.icon.setScale(e.iconScale)},a.click=function(){this._available&&this._item.clickEvents[0].emit([this._item])},a.updateAvailable=function(e){this._available=e>=this._item.price,this.bg.getComponent(s).grayscale=!this._available},i}(p)).prototype,"bg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(g.prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(g.prototype,"label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=g))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/BonusPanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HiddenPanel.ts","./BonusItemScript.ts"],(function(e){var n,t,i,o,r,s,a,u,l,c,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Prefab,u=e.instantiate,l=e.Vec3},function(e){c=e.HiddenPanel},function(e){p=e.BonusItemScript}],execute:function(){var h,d,f,b,v;r._RF.push({},"9fedcJHX/1AeK/MxieASW4G","BonusPanelScript",void 0);var y=s.ccclass,P=s.property;e("BonusPanelScript",(h=y("BonusPanelScript"),d=P(a),h((v=n((b=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,i(n,"bonusItem",v,o(n)),n.bonuses=void 0,n}t(n,e);var r=n.prototype;return r.init=function(e){this.node.removeAllChildren(),this.bonuses=new Array;for(var n=0;n<e.length;n++){var t=u(this.bonusItem);t.setPosition(new l(0,150*n-150*(e.length-1)/2));var i=t.getComponent(p);i.init(e[n]),this.bonuses.push(i),this.node.addChild(t)}},r.updateBonuses=function(e){for(var n=0;n<this.bonuses.length;n++){this.bonuses[n].updateAvailable(e)}},n}(c)).prototype,"bonusItem",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=b))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/Cell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,h,n;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,h=t._decorator,n=t.Vec2}],execute:function(){var s;i._RF.push({},"b9c009u8MpOxpLDzUMlbIx0","Cell",void 0);var r=h.ccclass;h.property,t("Cell",r("Cell")(s=function(){function t(){this._type=void 0,this._width=void 0,this._height=void 0,this._halfWidth=void 0,this._halfHeight=void 0,this._center=new n,this.vertices=new Map,this.edges=new Map}var i=t.prototype;return i.getVertex=function(t){return this.vertices[t]},i.getVertices=function(){return this.vertices},i.getEdges=function(){return this.edges},i.initialize=function(){this._halfWidth=this._width/2,this._halfHeight=this._height/2,this._center.set(this._halfWidth,this._halfHeight),this.setVertices(),this.setEdges()},e(t,[{key:"type",get:function(){return this._type}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"halfWidth",get:function(){return this._halfWidth}},{key:"halfHeight",get:function(){return this._halfHeight}},{key:"center",get:function(){return this._center}}]),t}())||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/CellFromRectangle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Cell.ts","./Enumerations.ts","./Edge.ts"],(function(e){var t,s,i,n,c,r,o,l;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,i=e._decorator,n=e.Vec2},function(e){c=e.Cell},function(e){r=e.Position,o=e.CellType},function(e){l=e.Edge}],execute:function(){var h;s._RF.push({},"c0c012bq2hGyoNBdSia5/Ci","CellFromRectangle",void 0);var g=i.ccclass;i.property,e("CellFromRectangle",g("CellFromRectangle")(h=function(e){function s(t,s){var i;return(i=e.call(this)||this)._type=o.RECTANGLE,i._width=t,i._height=s,i.initialize(),i}t(s,e);var i=s.prototype;return i.setVertices=function(){this.vertices.set(r.LB,new n(0,0)),this.vertices.set(r.RB,new n(this._width,0)),this.vertices.set(r.RT,new n(this._width,this._height)),this.vertices.set(r.LT,new n(0,this._height))},i.setEdges=function(){this.edges.set(r.B,new l(this.vertices.get(r.LB).clone(),this.vertices.get(r.RB).clone())),this.edges.set(r.R,new l(this.vertices.get(r.RB).clone(),this.vertices.get(r.RT).clone())),this.edges.set(r.T,new l(this.vertices.get(r.RT).clone(),this.vertices.get(r.LT).clone())),this.edges.set(r.L,new l(this.vertices.get(r.LT).clone(),this.vertices.get(r.LB).clone()))},s}(c))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Edge.ts",["cc"],(function(t){var i,e,n;return{setters:[function(t){i=t.cclegacy,e=t._decorator,n=t.Vec2}],execute:function(){var s;i._RF.push({},"bb4edeL6tpOpo9FAZ4f9JzJ","Edge",void 0);var r=e.ccclass;e.property,t("Edge",r("Edge")(s=function(){function t(t,i){this.v1=void 0,this.v2=void 0,this.v1=t?t.clone():new n,this.v2=i?i.clone():new n}var i=t.prototype;return i.set=function(t){return this.v1.set(t.v1),this.v2.set(t.v2),this},i.add=function(t){return this.v1.add(t),this.v2.add(t),this},i.pointToEdgeDistance=function(t){return(this.v2.x-this.v1.x)*(t.y-this.v1.y)-(this.v2.y-this.v1.y)*(t.x-this.v1.x)},i.toString=function(){return"{ v1 "+this.v1.toString()+", v2 "+this.v2.toString()+" }"},t}())||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/Enumerations.ts",["cc"],(function(r){var e,t;return{setters:[function(r){e=r.cclegacy,t=r._decorator}],execute:function(){e._RF.push({},"9838ayyKENF+qt4ZO18bxP1","Enumerations",void 0);t.ccclass,t.property;var n=r("Position",function(r){return r[r.OUT=1]="OUT",r[r.IN=2]="IN",r[r.C=3]="C",r[r.L=4]="L",r[r.T=5]="T",r[r.R=6]="R",r[r.B=7]="B",r[r.LB=8]="LB",r[r.LT=9]="LT",r[r.RT=10]="RT",r[r.RB=11]="RB",r[r.UP=12]="UP",r[r.DOWN=13]="DOWN",r}({}));r("CellType",function(r){return r[r.RECTANGLE=0]="RECTANGLE",r[r.OVAL=1]="OVAL",r[r.RHOMB=2]="RHOMB",r[r.PARALLELOGRAM=3]="PARALLELOGRAM",r[r.HEXAGON=4]="HEXAGON",r[r.ISOMETRIC_HEXAGON=5]="ISOMETRIC_HEXAGON",r}({})),r("PositionToString",function(){function r(){}return r.toString=function(r){switch(r){case n.OUT:return"OUT";case n.IN:return"IN";case n.C:return"C";case n.L:return"L";case n.T:return"T";case n.R:return"R";case n.B:return"B";case n.LB:return"LB";case n.LT:return"LT";case n.RT:return"RT";case n.RB:return"RB";case n.UP:return"UP";case n.DOWN:return"DOWN";default:return"В перечислении Position нет ключа с таким именем '"+r+"'"}},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/FieldLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CellFromRectangle.ts","./RectangleGrid.ts","./ShapeBuilder.ts","./Enumerations.ts","./Tile.ts","./FieldPanelScript.ts","./BlocksPrefabs.ts"],(function(e){var i,t,l,n,s,r,o,a,c,h,u,f,p,d,g,y,T,v,S,b;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,l=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createClass},function(e){r=e.cclegacy,o=e._decorator,a=e.Node,c=e.Vec2,h=e.randomRangeInt,u=e.instantiate,f=e.Vec3,p=e.Component},function(e){d=e.CellFromRectangle},function(e){g=e.RectangleGrid},function(e){y=e.ShapeBuilder},function(e){T=e.Position},function(e){v=e.Tile},function(e){S=e.FieldPanelScript},function(e){b=e.BlocksPrefabs}],execute:function(){var w,_,P,x,z,m,R,B,L,k;r._RF.push({},"6110exvDt9Pi7tDD4W6dwuV","FieldLogic",void 0);var G=o.ccclass,N=o.property;e("FieldLogic",(w=G("FieldLogic"),_=N(a),w((z=i((x=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return i=e.call.apply(e,[this].concat(s))||this,l(i,"fieldPanel",z,n(i)),l(i,"fieldSize",m,n(i)),l(i,"cellSize",R,n(i)),l(i,"minBlocksGroup",B,n(i)),l(i,"maxShuffleTry",L,n(i)),l(i,"bombDistance",k,n(i)),i._fieldPanelScript=void 0,i._cell=void 0,i._grid=void 0,i._shapeRectangle=void 0,i._offsetNewTile=new Map,i.tiles=new Array,i.selectedTiles=new Array,i}t(i,e);var r=i.prototype;return r.start=function(){this._fieldPanelScript=this.fieldPanel.getComponent(S)},r.initialize=function(){var e=this;this._cell=new d(this.cellSize.x,this.cellSize.y);var i=new c(-this.fieldSize.x*this._cell.width/2,-this.fieldSize.y*this._cell.height/2);this._grid=new g(this._cell,i,new c),this._shapeRectangle=y.getRectangle(new c,T.RT,this.fieldSize),this.clearTiles(),this.shapeRectangle.get().forEach((function(i){e.createTile(i.clone())}))},r.createTile=function(e){var i=this.grid.gridToScreen(e),t=h(0,b.getLength()),l=u(b.getBlockPrefabByType(t));l.active=!0,l.setPosition(new f(i.x,i.y,0)),this._fieldPanelScript.add(l);var n=new v;return n.pos=e,n.node=l,n.type=t,n.init(),this.tiles.push(n),n.updateLabel((this.tiles.length-1).toString()),n},r.updateLabels=function(){for(var e=0;e<this.tiles.length;e++)this.tiles[e].updateLabel(e.toString())},r.clearTiles=function(){this.tiles=new Array},r.clearSelectedTiles=function(){this.selectedTiles=new Array},r.getTyleByGridPosition=function(e){for(var i=0;i<this.tiles.length;i++)if(this.tiles[i].pos.equals(e))return this.tiles[i];return null},r.getTyleIndexByGridPosition=function(e){return e.y*this.fieldSize.x+e.x},r.getSimpleClick=function(e){var i=this;this.clearSelectedTiles();var t=new Array(this.tiles.length).fill(!1),l=new Array,n=this.tiles[this.getTyleIndexByGridPosition(e)],s=n.type;this.selectedTiles.push(n),t[this.getTyleIndexByGridPosition(e)]=!0,l.push(e.clone());for(var r=function(e,n){var r=i._grid.getCellNeighbor(e,n);if(i._shapeRectangle.isInShape(r)){var o=i.getTyleIndexByGridPosition(r);if(!t[o]){t[o]=!0;var a=i.tiles[o];a.type==s&&(l.push(r.clone()),i.selectedTiles.push(a))}}};0!==l.length;){var o=l.shift();r(o,T.L),r(o,T.T),r(o,T.R),r(o,T.B)}},r.spawnNewTiles=function(){var e=this;this.clearSelectedTiles(),this._offsetNewTile.clear();for(var i=!0;i;)i=!1,this.shapeRectangle.get().forEach((function(t){if(null==e.getTyleByGridPosition(t)){if(t.y==e.shapeRectangle.rt.y){var l=e.createTile(t.clone());e._offsetNewTile.get(t.x)?e._offsetNewTile.set(t.x,e._offsetNewTile.get(t.x)+1):e._offsetNewTile.set(t.x,1);var n=t.clone();n.y+=e._offsetNewTile.get(t.x);var s=e.grid.gridToScreen(n);l.node.setPosition(new f(s.x,s.y,0)),e.selectedTiles.push(l)}else{var r=e.grid.getCellNeighbor(t,T.T),o=e.getTyleByGridPosition(r);null!=o&&(o.pos=t.clone(),e.selectedTiles.push(o))}i=!0}}));this.sortTiles()},r.checkNeedShuffle=function(){for(var e,i=this,t=!0,l=function(l,n){var s=i._grid.getCellNeighbor(l,n);return!(!i._shapeRectangle.isInShape(s)||i.tiles[i.getTyleIndexByGridPosition(s)].type!=e.type)&&(t=!1,!0)},n=0;n<this.tiles.length&&!l((e=this.tiles[n]).pos,T.L)&&!l(e.pos,T.T)&&!l(e.pos,T.R)&&!l(e.pos,T.B);n++);return t},r.sortTiles=function(){this.tiles.sort((function(e,i){return e.pos.y<i.pos.y?-1:e.pos.y>i.pos.y?1:e.pos.x<i.pos.x?-1:e.pos.x>i.pos.x?1:0})),this.updateLabels()},r.shuffle=function(){for(var e=this.tiles.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),t=this.tiles[i],l=this.tiles[e],n=t.pos.clone();t.pos=l.pos.clone(),l.pos=n.clone()}this.sortTiles(),this.updateLabels()},r.selectCircle=function(e){var i=this;this.clearSelectedTiles(),y.getMidpointCircle(e,this.bombDistance).get().forEach((function(e){i._shapeRectangle.isInShape(e)&&i.selectedTiles.push(i.tiles[i.getTyleIndexByGridPosition(e)])}))},s(i,[{key:"cell",get:function(){return this._cell}},{key:"grid",get:function(){return this._grid}},{key:"shapeRectangle",get:function(){return this._shapeRectangle}},{key:"getFieldSize",get:function(){return this.fieldSize}},{key:"getCellSize",get:function(){return this.cellSize}}]),i}(p)).prototype,"fieldPanel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(x.prototype,"fieldSize",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(8,8)}}),R=i(x.prototype,"cellSize",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(85.5,85.5)}}),B=i(x.prototype,"minBlocksGroup",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=i(x.prototype,"maxShuffleTry",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),k=i(x.prototype,"bombDistance",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),P=x))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/FieldPanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HiddenPanel.ts"],(function(e){var t,i,n,r,o,l,a,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,c=e.UITransform},function(e){s=e.HiddenPanel}],execute:function(){var u,d,f,p,h,m,v,y;o._RF.push({},"6d9d0lhhHBN95KxZyYrPpA4","FieldPanelScript",void 0);var S=l.ccclass,b=l.property;e("FieldPanelScript",(u=S("FieldPanelScript"),d=b(a),f=b(a),u((m=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"fieldBG",m,r(t)),n(t,"content",v,r(t)),n(t,"sizeScale",y,r(t)),t._uiTransform=void 0,t}i(t,e);var o=t.prototype;return o.clear=function(){this.content.removeAllChildren()},o.add=function(e){this.content.addChild(e)},o.remove=function(e){this.content.removeChild(e)},o.init=function(e,t){this.node.active=!0,this._uiTransform=this.fieldBG.getComponent(c),this._uiTransform.setContentSize(this.sizeScale*(e.x*t.x)/100,this.sizeScale*(e.y*t.x)/100)},o.getContentXY=function(e){return this._uiTransform.convertToNodeSpaceAR(e)},t}(s)).prototype,"fieldBG",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(h.prototype,"content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(h.prototype,"sizeScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),p=h))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameEnumerations.ts",["cc"],(function(e){var n,t,r;return{setters:[function(e){n=e.cclegacy,t=e._decorator,r=e.Enum}],execute:function(){n._RF.push({},"898fexC4yBDII8J5fPn15IH","GameEnumerations",void 0);t.ccclass,t.property;var c=e("BonusType",function(e){return e[e.BOMB=0]="BOMB",e[e.SWAP=1]="SWAP",e}({}));r(c),n._RF.pop()}}}));

System.register("chunks:///_virtual/GameScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enumerations.ts","./ProgressPanelScript.ts","./ScorePanelScript.ts","./LevelPanelScript.ts","./Level.ts","./FieldPanelScript.ts","./FieldLogic.ts","./PauseButtonPanelScript.ts","./GoalsPanelScript.ts","./MovesPanelScript.ts","./MoneyPanelScript.ts","./BonusPanelScript.ts","./LevelScorePanelScript.ts","./RangeValue.ts","./RangeVerifier.ts","./BlocksPrefabs.ts","./LabelPanelScript.ts","./BonusItem.ts","./GameEnumerations.ts"],(function(e){var t,i,n,s,l,r,a,o,c,_,h,u,S,p,f,L,d,P,E,g,v,b,C,W,T,I,w,A,M,m,y,B,N,O,k,D,V;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,a=e.Node,o=e.ProgressBar,c=e.Prefab,_=e.input,h=e.Input,u=e.math,S=e.director,p=e.tween,f=e.Vec3,L=e.view,d=e.Vec2,P=e.Component},function(e){E=e.Position},function(e){g=e.ProgressPanelScript},function(e){v=e.ScorePanelScript},function(e){b=e.LevelPanelScript},function(e){C=e.Level},function(e){W=e.FieldPanelScript},function(e){T=e.FieldLogic},function(e){I=e.PauseButtonPanelScript},function(e){w=e.GoalsPanelScript},function(e){A=e.MovesPaneScript},function(e){M=e.MoneyPanelScript},function(e){m=e.BonusPanelScript},function(e){y=e.LevelScorePanelScript},function(e){B=e.RangeValue},function(e){N=e.RangeVerifier},function(e){O=e.BlocksPrefabs},function(e){k=e.LabelPanelScript},function(e){D=e.BonusItem},function(e){V=e.BonusType}],execute:function(){var R,K,H,G,F,z,x,U,q,X,Y,j,J,Q,Z,$,ee,te,ie,ne,se,le,re,ae,oe,ce,_e,he,ue,Se,pe,fe,Le,de,Pe,Ee,ge,ve,be;l._RF.push({},"586b1fN+xRMLr6zcs2Nd3oi","GameScript",void 0);var Ce=r.ccclass,We=r.property,Te=function(e){return e[e.SHOW_LEVEL_WINDOW=0]="SHOW_LEVEL_WINDOW",e[e.SHOW_SCORE_WINDOW=1]="SHOW_SCORE_WINDOW",e[e.START_LEVEL=2]="START_LEVEL",e[e.CREATE_LEVEL=3]="CREATE_LEVEL",e[e.WAIT_SIMPLE_CLICK=4]="WAIT_SIMPLE_CLICK",e[e.WAIT_BOMB_CLICK=5]="WAIT_BOMB_CLICK",e[e.WAIT_SWAP_CLICK=6]="WAIT_SWAP_CLICK",e[e.SEARCH_TILES=7]="SEARCH_TILES",e[e.REMOVE_SELECTED_TILES=8]="REMOVE_SELECTED_TILES",e[e.CHECK_END_GAME=9]="CHECK_END_GAME",e[e.SPAWN_NEW_TILES=10]="SPAWN_NEW_TILES",e[e.CHECK_NEED_SHUFFLE=11]="CHECK_NEED_SHUFFLE",e[e.WAIT_SWAP=12]="WAIT_SWAP",e[e.FAIL_GAME=13]="FAIL_GAME",e[e.WIN_LEVEL=14]="WIN_LEVEL",e[e.NO_MOVES=15]="NO_MOVES",e[e.PAUSE=16]="PAUSE",e}(Te||{});e("GameStateToString",function(){function e(){}return e.toString=function(e){switch(e){case Te.SHOW_LEVEL_WINDOW:return"SHOW_LEVEL_WINDOW";case Te.SHOW_SCORE_WINDOW:return"SHOW_SCORE_WINDOW";case Te.START_LEVEL:return"START_LEVEL";case Te.CREATE_LEVEL:return"LOAD_LEVEL";case Te.WAIT_SIMPLE_CLICK:return"WAIT_SIMPLE_CLICK";case Te.WAIT_BOMB_CLICK:return"WAIT_BOMB_CLICK";case Te.WAIT_SWAP_CLICK:return"WAIT_SWAP_CLICK";case Te.SEARCH_TILES:return"SEARCH_TILES";case Te.REMOVE_SELECTED_TILES:return"REMOVE_SELECTED_TILES";case Te.CHECK_END_GAME:return"CHECK_END_GAME";case Te.SPAWN_NEW_TILES:return"SPAWN_NEW_TILES";case Te.CHECK_NEED_SHUFFLE:return"CHECK_NEED_SHUFFLE";case Te.WAIT_SWAP:return"WAIT_SWAP";case Te.FAIL_GAME:return"FAIL_GAME";case Te.WIN_LEVEL:return"WIN_LEVEL";case Te.NO_MOVES:return"NO_MOVES";case Te.PAUSE:return"PAUSE";default:return"В перечислении GameState нет ключа с таким именем '"+e+"'"}},e}()),e("GameScript",(R=Ce("GameScript"),K=We(a),H=We(a),G=We(a),F=We(a),z=We(a),x=We(a),U=We(a),q=We(a),X=We(a),Y=We(a),j=We(a),J=We(a),Q=We(o),Z=We([c]),$=We([C]),ee=We([B]),te=We([B]),ie=We([D]),R((le=t((se=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,n(t,"fieldPanel",le,s(t)),n(t,"progressPanel",re,s(t)),n(t,"scorePanel",ae,s(t)),n(t,"levelPanel",oe,s(t)),n(t,"pausePanel",ce,s(t)),n(t,"goalsPanel",_e,s(t)),n(t,"mavesPanel",he,s(t)),n(t,"labelPanel",ue,s(t)),n(t,"moneyPanel",Se,s(t)),n(t,"levelScorePanel",pe,s(t)),n(t,"bonusPanel",fe,s(t)),n(t,"screenLoaderPanel",Le,s(t)),n(t,"progressBar",de,s(t)),n(t,"bloсkPrefabs",Pe,s(t)),n(t,"levels",Ee,s(t)),n(t,"revardsMoney",ge,s(t)),n(t,"revardsScore",ve,s(t)),n(t,"bonuses",be,s(t)),t._fieldLogic=void 0,t._fieldPanelScript=void 0,t._progressPanelScript=void 0,t._scorePanelScript=void 0,t._levelPanelScript=void 0,t._pauseButtonPanelScript=void 0,t._goalsPanelScript=void 0,t._movesPanelScript=void 0,t._labelPanelScript=void 0,t._moneyPanelScript=void 0,t._levelScorePanelScript=void 0,t._bonusPanelScript=void 0,t._currentState=void 0,t._currentLevel=-1,t._currentLevelData=null,t._movesLeft=void 0,t._lastDeletedBlocksCount=0,t._rewardMoney=0,t._rewardScore=0,t._maxLevelBlocksProgress=0,t._currentLevelBlocksProgress=0,t._goalsBlock=new Map,t._currentShuffleTry=0,t._startedAnimations=0,t._swapTile=null,t._isPause=!1,t.onPorogressLoadScreene=function(e,i,n){t.progressBar.progress=e/i},t}i(t,e);var l=t.prototype;return l.start=function(){O.setPrefabs(this.bloсkPrefabs),this._fieldLogic=this.node.getComponent(T),this._fieldPanelScript=this.fieldPanel.getComponent(W),this._progressPanelScript=this.progressPanel.getComponent(g),this._scorePanelScript=this.scorePanel.getComponent(v),this._levelPanelScript=this.levelPanel.getComponent(b),this._pauseButtonPanelScript=this.pausePanel.getComponent(I),this._goalsPanelScript=this.goalsPanel.getComponent(w),this._movesPanelScript=this.mavesPanel.getComponent(A),this._labelPanelScript=this.labelPanel.getComponent(k),this._moneyPanelScript=this.moneyPanel.getComponent(M),this._levelScorePanelScript=this.levelScorePanel.getComponent(y),this._bonusPanelScript=this.bonusPanel.getComponent(m),_.on(h.EventType.MOUSE_DOWN,this.onMouseDown,this),_.on(h.EventType.MOUSE_MOVE,this.onMouseMove,this),_.on(h.EventType.TOUCH_START,this.onTouchStart,this),this.setState(Te.SHOW_LEVEL_WINDOW)},l.setState=function(e){e!=this._currentState&&(this._currentState=e,this.onStateChanged())},l.onStateChanged=function(){switch(this._currentState){case Te.SHOW_LEVEL_WINDOW:this.showLevelWindow();break;case Te.SHOW_SCORE_WINDOW:this.showScoreWindow();break;case Te.START_LEVEL:this.startLevel();break;case Te.CREATE_LEVEL:this.createLevel();break;case Te.REMOVE_SELECTED_TILES:this.removeSelectedTiles();break;case Te.CHECK_END_GAME:this.checkEndGame();break;case Te.SPAWN_NEW_TILES:this.spawnNewTiles();break;case Te.CHECK_NEED_SHUFFLE:this.checkNeedShuffle();break;case Te.FAIL_GAME:this.failGame();break;case Te.WIN_LEVEL:this.winLevel();break;case Te.NO_MOVES:this.noMoves()}},l.pause=function(){var e=this;this._isPause=!this._isPause,this._isPause?(this.setState(Te.PAUSE),this._fieldPanelScript.hideWithScale((function(){e._labelPanelScript.setLebel("Сделали\nперерывчик?",new u.Color(239,223,148,255),80),e._labelPanelScript.showWithScale()}))):this._labelPanelScript.hideWithScale((function(){e._fieldPanelScript.showWithScale((function(){e.setState(Te.WAIT_SIMPLE_CLICK)}))}))},l.gotoMainMenu=function(){var e=this;this.screenLoaderPanel.active=!0,S.preloadScene("MainMenuScene",this.onPorogressLoadScreene,(function(t,i){var n=setInterval((function(){clearInterval(n),e.screenLoaderPanel.active=!1,S.loadScene("MainMenuScene")}),500)}))},l.showLevelWindow=function(){var e=this;if(this._currentLevel++,this._currentLevel<this.levels.length)this._currentLevelData=this.levels[this._currentLevel],this._levelPanelScript.init(this._currentLevelData,(function(){e.setState(Te.START_LEVEL)})),this._levelPanelScript.showWithScale();else{this._labelPanelScript.setLebel("Игра пройдена",new u.Color(137,202,74,255),80),this._labelPanelScript.showWithScale();var t=setInterval((function(){clearInterval(t),e._labelPanelScript.hideWithScale((function(){e.gotoMainMenu()}))}),1e3)}},l.showScoreWindow=function(){var e=this;this._scorePanelScript.init(this._currentLevel+1,this._rewardScore,(function(){e.setState(Te.SHOW_LEVEL_WINDOW)}),(function(){e.gotoMainMenu()})),this._scorePanelScript.showWithScale()},l.startLevel=function(){this._movesLeft=this._currentLevelData.moves,this._lastDeletedBlocksCount=0,this._rewardMoney=0,this._rewardScore=0,this._maxLevelBlocksProgress=0,this._currentLevelBlocksProgress=0,this._goalsBlock=new Map;for(var e=0;e<this._currentLevelData.goals.length;e++){var t=this._currentLevelData.goals[e].type,i=this._currentLevelData.goals[e].quantity;this._goalsBlock.set(t,i),this._maxLevelBlocksProgress+=i}this._currentLevelBlocksProgress=this._maxLevelBlocksProgress,this._progressPanelScript.setProgress(0,!1),this._goalsPanelScript.init(this._currentLevelData),this._movesPanelScript.setValue(this._currentLevelData.moves),this._fieldPanelScript.init(this._fieldLogic.getFieldSize,this._fieldLogic.getCellSize),this._levelScorePanelScript.setValue(0),this._moneyPanelScript.setValue(0),this._bonusPanelScript.init(this.bonuses),this._bonusPanelScript.updateBonuses(this._rewardMoney),this._progressPanelScript.showWithMove(),this._pauseButtonPanelScript.showWithMove(),this._goalsPanelScript.showWithMove(),this._movesPanelScript.showWithMove(),this._fieldPanelScript.showWithScale(),this._levelScorePanelScript.showWithMove(),this._moneyPanelScript.showWithMove(),this._bonusPanelScript.showWithMove(),this.setState(Te.CREATE_LEVEL)},l.createLevel=function(){this._currentShuffleTry=0,this._fieldPanelScript.clear(),this._fieldLogic.initialize(),this.setState(Te.WAIT_SIMPLE_CLICK)},l.simpleClickAction=function(e){this._fieldLogic.getSimpleClick(e),this.setState(Te.REMOVE_SELECTED_TILES)},l.bombClickAction=function(e){this._fieldLogic.selectCircle(e),this.setState(Te.REMOVE_SELECTED_TILES)},l.swapClickAction=function(e){var t=this,i=this._fieldLogic.tiles[this._fieldLogic.getTyleIndexByGridPosition(e)];if(null!=i)if(null==this._swapTile)this._swapTile=i,this._swapTile.setSelected(!0);else if(this._swapTile.pos.equals(i.pos))this._swapTile.setSelected(!1),this._swapTile=null;else{var n=this._fieldLogic.grid.getCellNeighbor(this._swapTile.pos,E.L),s=this._fieldLogic.grid.getCellNeighbor(this._swapTile.pos,E.T),l=this._fieldLogic.grid.getCellNeighbor(this._swapTile.pos,E.R),r=this._fieldLogic.grid.getCellNeighbor(this._swapTile.pos,E.B);if(i.pos.equals(n)||i.pos.equals(s)||i.pos.equals(l)||i.pos.equals(r)){var a=this._swapTile.pos.clone();this._swapTile.setSelected(!1),this._swapTile.pos=i.pos.clone(),this._swapTile.updateLabel(),i.pos=a,i.updateLabel(),this.sortTilesAfterSwap(),this.moveTileToNewPos(this._swapTile,(function(){t.cancelSwapClickAction()})),this.moveTileToNewPos(i,(function(){t.cancelSwapClickAction()}))}}},l.sortTilesAfterSwap=function(){this._fieldLogic.sortTiles();for(var e=0;e<this._fieldLogic.tiles.length;e++){this._fieldLogic.tiles[e].node.setSiblingIndex(e)}},l.moveTileToNewPos=function(e,t){var i=this;this._startedAnimations++;var n=this._fieldLogic.grid.gridToScreen(e.pos);p(e.node).to(.8,{position:new f(n.x,n.y,0)},{easing:"backInOut"}).call((function(){i._startedAnimations--,0==i._startedAnimations&&t&&t()})).start()},l.cancelSwapClickAction=function(){this._swapTile=null,this.setState(Te.WAIT_SIMPLE_CLICK)},l.removeSelectedTiles=function(){var e=this;if(this._fieldLogic.selectedTiles.length>=this._fieldLogic.minBlocksGroup){this._lastDeletedBlocksCount=this._fieldLogic.selectedTiles.length;for(var t=function(){var t=e._fieldLogic.selectedTiles[i];if(e._goalsBlock.has(t.type)){var n=e._goalsBlock.get(t.type);n>0&&(e._goalsBlock.set(t.type,n-1),e._currentLevelBlocksProgress--)}e._fieldLogic.tiles.splice(e._fieldLogic.tiles.indexOf(t),1),e._startedAnimations++;var s=e._fieldLogic.grid.gridToScreen(t.pos);s.add(e._fieldLogic.cell.center);var l=p;l(t.node).parallel(l().to(.2,{scale:new f(0,0,1)},{easing:"backIn"}),l().to(.2,{position:new f(s.x,s.y,0)},{easing:"backIn"})).call((function(){e._startedAnimations--,e._fieldPanelScript.remove(t.node),0==e._startedAnimations&&e.setState(Te.CHECK_END_GAME)})).start()},i=0;i<this._fieldLogic.selectedTiles.length;i++)t()}else this.setState(Te.WAIT_SIMPLE_CLICK)},l.checkEndGame=function(){this._movesLeft--,this._movesPanelScript.setValue(this._movesLeft);for(var e=0;e<this.revardsMoney.length;e++)N.verify(this._lastDeletedBlocksCount,this.revardsMoney[e])&&(this._rewardMoney+=this.revardsMoney[e].reward,this._moneyPanelScript.setValue(this._rewardMoney),this._bonusPanelScript.updateBonuses(this._rewardMoney));for(var t=0;t<this.revardsScore.length;t++)N.verify(this._lastDeletedBlocksCount,this.revardsScore[t])&&(this._rewardScore+=this.revardsScore[t].reward,this._levelScorePanelScript.setValue(this._rewardScore));this._goalsPanelScript.updateValues(this._goalsBlock),this._progressPanelScript.setProgress(100-100*this._currentLevelBlocksProgress/this._maxLevelBlocksProgress,!0),0==this._movesLeft&&this._currentLevelBlocksProgress>0?this.setState(Te.FAIL_GAME):0==this._currentLevelBlocksProgress?this.setState(Te.WIN_LEVEL):this.setState(Te.SPAWN_NEW_TILES)},l.spawnNewTiles=function(){var e=this;this._fieldLogic.spawnNewTiles();for(var t=0;t<this._fieldLogic.selectedTiles.length;t++){var i=this._fieldLogic.selectedTiles[t],n=this._fieldLogic.grid.gridToScreen(i.pos),s=Math.max(Math.abs(i.node.getPosition().x-n.x),Math.abs(i.node.getPosition().y-n.y))/1500;p(i.node).to(s,{position:new f(n.x,n.y,0)},{easing:"linear"}).to(.1,{position:new f(n.x,n.y+3,0)},{easing:"linear"}).to(.1,{position:new f(n.x,n.y,0)},{easing:"linear"}).call((function(){e._fieldLogic.selectedTiles.splice(0,1),0==e._fieldLogic.selectedTiles.length&&e.setState(Te.CHECK_NEED_SHUFFLE)})).start()}},l.checkNeedShuffle=function(){var e=this;if(this._fieldLogic.checkNeedShuffle())if(this._currentShuffleTry==this._fieldLogic.maxShuffleTry)this.setState(Te.NO_MOVES);else{this._labelPanelScript.setLebel("Нет ходов",new u.Color(218,56,84,255),80),this._labelPanelScript.showWithScale();var t=setInterval((function(){clearInterval(t),e._labelPanelScript.hideWithScale((function(){e._currentShuffleTry++,e.shuffle()}))}),800)}else this.setState(Te.WAIT_SIMPLE_CLICK)},l.shuffle=function(){var e=this;this._labelPanelScript.setLebel("Тасуем",new u.Color(239,223,148,255),80),this._labelPanelScript.showWithScale();var t=setInterval((function(){clearInterval(t),e._fieldLogic.shuffle();for(var i=0;i<e._fieldLogic.tiles.length;i++){e._startedAnimations++;var n=e._fieldLogic.tiles[i];n.node.setSiblingIndex(i);var s=e._fieldLogic.grid.gridToScreen(n.pos);p(n.node).to(.8,{position:new f(s.x,s.y,0)},{easing:"backInOut"}).call((function(){e._startedAnimations--,0==e._startedAnimations&&e._labelPanelScript.hideWithScale((function(){e.checkNeedShuffle()}))})).start()}}),100)},l.failGame=function(){var e=this;this._currentLevel--,this._labelPanelScript.setLebel("Эх, Ещё бы чуть-чуть",new u.Color(220,59,87,255),60),this._labelPanelScript.showWithScale();var t=setInterval((function(){clearInterval(t),e.hideAllPanelsAndShowScoreWindow()}),1e3)},l.winLevel=function(){var e=this;this._labelPanelScript.setLebel("Победа",new u.Color(137,202,74,255),80),this._labelPanelScript.showWithScale();var t=setInterval((function(){clearInterval(t),e.hideAllPanelsAndShowScoreWindow()}),1e3)},l.noMoves=function(){var e=this;this._currentLevel--,this._labelPanelScript.setLebel("Увы, больше\nходов нет",new u.Color(83,176,246,255),80),this._labelPanelScript.showWithScale();var t=setInterval((function(){clearInterval(t),e._labelPanelScript.hideWithScale((function(){e._labelPanelScript.setLebel("конец игры",new u.Color(220,59,87,255),80),e._labelPanelScript.showWithScale();var t=setInterval((function(){clearInterval(t),e.hideAllPanelsAndShowScoreWindow()}),1e3)}))}),1e3)},l.hideAllPanelsAndShowScoreWindow=function(){var e=this;this._labelPanelScript.hideWithScale((function(){e._progressPanelScript.hideWithMove(),e._pauseButtonPanelScript.hideWithMove(),e._goalsPanelScript.hideWithMove(),e._movesPanelScript.hideWithMove(),e._fieldPanelScript.hideWithScale(),e._levelScorePanelScript.hideWithMove(),e._bonusPanelScript.hideWithMove(),e._moneyPanelScript.hideWithMove((function(){e.setState(Te.SHOW_SCORE_WINDOW)}))}))},l.bonusButtonPressed=function(e){switch(e.type){case V.BOMB:this._rewardMoney-=e.price,this._moneyPanelScript.setValue(this._rewardMoney),this._bonusPanelScript.updateBonuses(this._rewardMoney),this.setState(Te.WAIT_BOMB_CLICK);break;case V.SWAP:this._rewardMoney-=e.price,this._moneyPanelScript.setValue(this._rewardMoney),this._bonusPanelScript.updateBonuses(this._rewardMoney),this.setState(Te.WAIT_SWAP_CLICK)}},l.onFieldDown=function(e,t){if(this._currentState==Te.WAIT_SIMPLE_CLICK||this._currentState==Te.WAIT_BOMB_CLICK||this._currentState==Te.WAIT_SWAP_CLICK){var i=this._fieldPanelScript.getContentXY(new f(e/L.getScaleX(),t/L.getScaleY(),0)),n=new d(i.x,i.y),s=this._fieldLogic.grid.screenToGrid(n);if(s[0]==E.IN&&this._fieldLogic.shapeRectangle.isInShape(s[1]))switch(this._currentState){case Te.WAIT_SIMPLE_CLICK:this.simpleClickAction(s[1]);break;case Te.WAIT_BOMB_CLICK:this.bombClickAction(s[1]);break;case Te.WAIT_SWAP_CLICK:this.swapClickAction(s[1])}}},l.onMouseDown=function(e){1==e.getButton()&&this.shuffle(),2==e.getButton()&&this.setState(Te.CREATE_LEVEL)},l.onTouchStart=function(e){this.onFieldDown(e.getLocationX(),e.getLocationY())},l.onMouseMove=function(e){if(this._currentState==Te.WAIT_BOMB_CLICK){var t=this._fieldPanelScript.getContentXY(new f(e.getLocationX()/L.getScaleX(),e.getLocationY()/L.getScaleY(),0)),i=new d(t.x,t.y),n=this._fieldLogic.grid.screenToGrid(i);n[0]==E.IN&&this._fieldLogic.shapeRectangle.isInShape(n[1])?(this.selectTiles(!1),this._fieldLogic.selectCircle(n[1]),this.selectTiles(!0)):this.selectTiles(!1)}},l.selectTiles=function(e){for(var t=0;t<this._fieldLogic.selectedTiles.length;t++){this._fieldLogic.selectedTiles[t].setSelected(e)}},t}(P)).prototype,"fieldPanel",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(se.prototype,"progressPanel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(se.prototype,"scorePanel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(se.prototype,"levelPanel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(se.prototype,"pausePanel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(se.prototype,"goalsPanel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(se.prototype,"mavesPanel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(se.prototype,"labelPanel",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(se.prototype,"moneyPanel",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(se.prototype,"levelScorePanel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(se.prototype,"bonusPanel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(se.prototype,"screenLoaderPanel",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(se.prototype,"progressBar",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(se.prototype,"bloсkPrefabs",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ee=t(se.prototype,"levels",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ge=t(se.prototype,"revardsMoney",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=t(se.prototype,"revardsScore",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),be=t(se.prototype,"bonuses",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=se))||ne));l._RF.pop()}}}));

System.register("chunks:///_virtual/Goal.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e._decorator}],execute:function(){var o,a,l,u;r._RF.push({},"eee6dNBd9VBu7osSilwp4lw","Goal",void 0);var c=n.ccclass,p=n.property;e("Goal",c("Goal")((l=t((a=function(){i(this,"type",l,this),i(this,"quantity",u,this)}).prototype,"type",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=t(a.prototype,"quantity",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=a))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/GoalBlockScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlocksPrefabs.ts"],(function(e){var t,o,i,r,l,a,n,c,s,p,u,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,n=e.Node,c=e.Label,s=e.instantiate,p=e.UITransform,u=e.Vec3,b=e.Component},function(e){f=e.BlocksPrefabs}],execute:function(){var y,d,g,h,k,B,v;l._RF.push({},"394dcJ39TdDaIZ7nFBqgClo","GoalBlockScript",void 0);var m=a.ccclass,P=a.property;e("GoalBlockScript",(y=m("GoalBlockScript"),d=P(n),g=P(c),y((B=t((k=function(e){function t(){for(var t,o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,i(t,"block",B,r(t)),i(t,"label",v,r(t)),t}return o(t,e),t.prototype.setGoal=function(e){this.label.string=e.quantity.toString();var t=s(f.getBlockPrefabByType(e.type));t.getChildByName("Label").active=!1;var o=t.getComponent(p);t.setPosition(new u(-o.width/2,0,0)),this.block.addChild(t)},t}(b)).prototype,"block",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(k.prototype,"label",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=k))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/GoalItemScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlocksPrefabs.ts"],(function(e){var t,i,a,o,r,l,n,c,s,p,u,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,n=e.Node,c=e.Label,s=e.instantiate,p=e.Vec3,u=e.UITransform,b=e.Component},function(e){f=e.BlocksPrefabs}],execute:function(){var h,y,g,d,m,v,k;r._RF.push({},"9a6a1sx5eRL7LtCEGdqC5aP","GoalItemScript",void 0);var G=l.ccclass,P=l.property;e("GoalItemScript",(h=G("GoalItemScript"),y=P(n),g=P(c),h((v=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,a(t,"block",v,o(t)),a(t,"label",k,o(t)),t._goal=void 0,t}i(t,e);var r=t.prototype;return r.setGoal=function(e){this._goal=e,this.setValue(e.quantity);var t=s(f.getBlockPrefabByType(e.type));t.getChildByName("Label").active=!1,t.setScale(new p(.4,.4,1));var i=t.getComponent(u);t.setPosition(new p(-i.width/2*.4,-i.height/2*.4,0)),this.block.addChild(t)},r.getGoalType=function(){return this._goal.type},r.setValue=function(e){this.label.string=e.toString()},t}(b)).prototype,"block",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(m.prototype,"label",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=m))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Goals.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Goal.ts"],(function(e){var t,i,r,l,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,l=e._decorator},function(e){o=e.Goal}],execute:function(){var n,a,c,s,u,p;r._RF.push({},"00f7ddAyQtMAJ9xd/iWBY4v","Goals",void 0);var f=l.ccclass,v=l.property;e("Goals",(n=f("Goals"),a=v([o]),n((u=t((s=function(){i(this,"level",u,this),i(this,"levelGoals",p,this)}).prototype,"level",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=t(s.prototype,"levelGoals",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=s))||c));r._RF.pop()}}}));

System.register("chunks:///_virtual/GoalsPanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GoalItemScript.ts","./HiddenPanel.ts"],(function(t){var e,i,r,a,s,o,n,l,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,n=t.Prefab,l=t.instantiate},function(t){c=t.GoalItemScript},function(t){p=t.HiddenPanel}],execute:function(){var u,g,h,f,d;s._RF.push({},"59288KUgNRGn6FMXW9cr/KC","GoalsPanelScript",void 0);var y=o.ccclass,P=o.property;t("GoalsPanelScript",(u=y("GoalsPanelScript"),g=P(n),u((d=e((f=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,r(e,"goalPrefab",d,a(e)),e._goalsItemsScripts=new Array,e}i(e,t);var s=e.prototype;return s.init=function(t){this._goalsItemsScripts=new Array,this.node.removeAllChildren();for(var e=0;e<t.goals.length;e++){var i=l(this.goalPrefab),r=i.getComponent(c);r.setGoal(t.goals[e]),this._goalsItemsScripts.push(r);var a=i.getPosition();a.y=-120*e,i.setPosition(a),this.node.addChild(i)}},s.updateValues=function(t){for(var e=0;e<this._goalsItemsScripts.length;e++)t.has(this._goalsItemsScripts[e].getGoalType())&&this._goalsItemsScripts[e].setValue(t.get(this._goalsItemsScripts[e].getGoalType()))},e}(p)).prototype,"goalPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/Grid.ts",["cc","./Enumerations.ts","./Edge.ts"],(function(t){var i,e,n,h,s,o;return{setters:[function(t){i=t.cclegacy,e=t._decorator,n=t.Vec2},function(t){h=t.CellType,s=t.Position},function(t){o=t.Edge}],execute:function(){var r;i._RF.push({},"700dbPH0TNCQbmbRAoOYbc/","Grid",void 0);var c=e.ccclass;e.property,t("Grid",c("Grid")(r=function(){function t(t,i,e){this._cell=void 0,this._originPosition=void 0,this._gap=void 0,this.neighbors=new Map,this.diagonals=new Map,this.neighborsShifted=new Map,this.diagonalsShifted=new Map,this._position=void 0,this._tempPoint=new n,this._tempEdge=new o,this._tempOvalHit=void 0,this._cell=t,this._originPosition=i,this._gap=e}var i=t.prototype;return i.initialize=function(){this.setNeighbors(),this.calculateGridSpecificPrameters()},i.isPointInside=function(t,i,e){return void 0===e&&(e=!1),this._cell.type==h.OVAL?this.checkOval(t,i,e):this.checkEdges(t,i)},i.defineQuadrant=function(t,i){return t.x<=i.x?t.y>=i.y?s.LT:s.LB:t.y>=i.y?s.RT:s.RB},i.checkOval=function(t,i,e){return void 0===e&&(e=!1),this._tempPoint.x=this._cell.center.x,this._tempPoint.y=this._cell.center.y,this._tempPoint.add(i),this._tempOvalHit=Math.pow(t.x-this._tempPoint.x,2)/Math.pow(this._cell.halfWidth,2)+Math.pow(t.y-this._tempPoint.y,2)/Math.pow(this._cell.halfHeight,2),this._tempOvalHit>1?e?this.defineQuadrant(t,this._tempPoint):s.OUT:this._tempOvalHit<=1?s.IN:e?this.defineQuadrant(t,this._tempPoint):s.OUT},i.checkEdges=function(t,i){var e=this;return this._cell.getEdges().forEach((function(n,h){if(e._tempEdge.set(n),e._tempEdge.add(i),e._tempEdge.pointToEdgeDistance(t)<0)return h})),s.IN},i.getNeighbor=function(t,i){var e=t.clone();return this.neighbors.has(i)?e.add(this.neighbors.get(i)):null},i.getNeighborShifted=function(t,i,e){var n=t.clone();return e?n.add(this.neighbors.get(i)):n.add(this.neighborsShifted.get(i))},i.getNeighborShiftedByX=function(t,i){return this.getNeighborShifted(t,i,t.x%2==0)},i.getNeighborShiftedByY=function(t,i){return this.getNeighborShifted(t,i,t.y%2==0)},i.getNeighbors=function(t){return this.neighbors},i.getNeighborsShifted=function(t){return t?this.neighbors:this.neighborsShifted},i.getNeighborsShiftedByX=function(t){return this.getNeighborsShifted(t.x%2==0)},i.getNeighborsShiftedByY=function(t){return this.getNeighborsShifted(t.y%2==0)},t}())||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/HiddenPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,o,a,s,r,c,l;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.Vec3,c=e.tween,l=e.Component}],execute:function(){var h,d,u,p,f,b,w,y,g,P,v;a._RF.push({},"0b6abEec/tKNKOBIo3f9bmq","HiddenPanel",void 0);var S=s.ccclass,m=s.property;e("HiddenPanel",(h=S("HiddenPanel"),d=m({group:{name:"position",id:"0",displayOrder:1},type:r,tooltip:"Позиция в которую будет перемешена панель"}),u=m({group:{name:"position",id:"0",displayOrder:1},type:r}),p=m({group:{name:"scale",id:"0",displayOrder:2},type:r}),f=m({group:{name:"scale",id:"0",displayOrder:2},type:r}),h((y=i((w=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return i=e.call.apply(e,[this].concat(a))||this,n(i,"showPosition",y,o(i)),n(i,"hidePosition",g,o(i)),n(i,"showScale",P,o(i)),n(i,"hideScale",v,o(i)),i}t(i,e);var a=i.prototype;return a.showWithScale=function(e){this.node.active=!0,this.node.setScale(this.hideScale),this.node.setPosition(this.showPosition),c(this.node).to(.4,{scale:this.showScale},{easing:"backOut"}).call((function(){e&&e()})).start()},a.hideWithScale=function(e){var i=this;c(this.node).to(.4,{scale:this.hideScale},{easing:"backIn"}).call((function(){i.node.active=!1,e&&e()})).start()},a.showWithMove=function(e){this.node.active=!0,this.node.setScale(this.showScale),this.node.setPosition(this.hidePosition),c(this.node).to(.4,{position:this.showPosition},{easing:"backOut"}).call((function(){e&&e()})).start()},a.hideWithMove=function(e){var i=this;c(this.node).to(.4,{position:this.hidePosition},{easing:"backIn"}).call((function(){i.node.active=!1,e&&e()})).start()},i}(l)).prototype,"showPosition",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r(0,0,0)}}),g=i(w.prototype,"hidePosition",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r(0,0,0)}}),P=i(w.prototype,"showScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r(1,1,1)}}),v=i(w.prototype,"hideScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r(0,0,1)}}),b=w))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/LabelPanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HiddenPanel.ts"],(function(e){var t,l,n,r,i,a,o,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,o=e.Label,c=e.math},function(e){s=e.HiddenPanel}],execute:function(){var p,u,b,f,h;i._RF.push({},"0f93eBw65ZEBIFfEneDpbNH","LabelPanelScript",void 0);var d=a.ccclass,y=a.property;e("LabelPanelScript",(p=d("LabelPanelScript"),u=y(o),p((h=t((f=function(e){function t(){for(var t,l=arguments.length,i=new Array(l),a=0;a<l;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"label",h,r(t)),t}return l(t,e),t.prototype.setLebel=function(e,t,l){this.label.string=e,this.label.fontSize=l||120,this.label.color=t||new c.Color(255,255,255,255)},t}(s)).prototype,"label",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=f))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Goal.ts"],(function(e){var t,i,r,o,n;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,o=e._decorator},function(e){n=e.Goal}],execute:function(){var l,a,c,u,s,p,b;r._RF.push({},"03bb4hoj85CVYD5ByOvwCUA","Level",void 0);var f=o.ccclass,v=o.property;e("Level",(l=f("Level"),a=v([n]),l((s=t((u=function(){i(this,"label",s,this),i(this,"moves",p,this),i(this,"goals",b,this)}).prototype,"label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=t(u.prototype,"moves",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=t(u.prototype,"goals",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=u))||c));r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelPanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GoalBlockScript.ts","./HiddenPanel.ts"],(function(e){var l,i,t,a,r,n,o,c,s,p,u,h;return{setters:[function(e){l=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,n=e._decorator,o=e.Prefab,c=e.Label,s=e.Node,p=e.instantiate},function(e){u=e.GoalBlockScript},function(e){h=e.HiddenPanel}],execute:function(){var g,b,d,f,v,P,y,L,S;r._RF.push({},"1781aeMokxJ3Zki/BJFphgQ","LevelPanelScript",void 0);var k=n.ccclass,_=n.property;e("LevelPanelScript",(g=k("LevelPanelScript"),b=_(o),d=_(c),f=_(s),g((y=l((P=function(e){function l(){for(var l,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return l=e.call.apply(e,[this].concat(r))||this,t(l,"goalPrefab",y,a(l)),t(l,"labelLevel",L,a(l)),t(l,"goals",S,a(l)),l._hideCallback=void 0,l}i(l,e);var r=l.prototype;return r.init=function(e,l){this._hideCallback=l,this.labelLevel.string=e.label.toString(),this.goals.removeAllChildren();for(var i=0;i<e.goals.length;i++){var t=p(this.goalPrefab),a=t.getPosition();a.x=180*i-180*(e.goals.length-1)/2,t.setPosition(a),t.getComponent(u).setGoal(e.goals[i]),this.goals.addChild(t)}},r.hide=function(){this.hideWithScale(this._hideCallback)},l}(h)).prototype,"goalPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=l(P.prototype,"labelLevel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=l(P.prototype,"goals",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=P))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelScorePanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HiddenPanel.ts"],(function(e){var r,t,n,i,l,a,c,o;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,c=e.Label},function(e){o=e.HiddenPanel}],execute:function(){var s,p,u,f,v;l._RF.push({},"773fcAPKIpNCIw4L9+arOv7","LevelScorePanelScript",void 0);var S=a.ccclass,d=a.property;e("LevelScorePanelScript",(s=S("LevelScorePanelScript"),p=d(c),s((v=r((f=function(e){function r(){for(var r,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return r=e.call.apply(e,[this].concat(l))||this,n(r,"label",v,i(r)),r}return t(r,e),r.prototype.setValue=function(e){this.label.string=e.toString()},r}(o)).prototype,"label",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=f))||u));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./BlocksPrefabs.ts","./BonusItem.ts","./FieldLogic.ts","./GameEnumerations.ts","./GameScript.ts","./Goal.ts","./Goals.ts","./Cell.ts","./CellFromRectangle.ts","./Edge.ts","./Enumerations.ts","./Grid.ts","./RectangleGrid.ts","./Shape.ts","./ShapeBuilder.ts","./Level.ts","./RangeValue.ts","./RangeVerifier.ts","./Tile.ts","./BonusItemScript.ts","./BonusPanelScript.ts","./FieldPanelScript.ts","./GoalBlockScript.ts","./GoalItemScript.ts","./GoalsPanelScript.ts","./HiddenPanel.ts","./LabelPanelScript.ts","./LevelPanelScript.ts","./LevelScorePanelScript.ts","./MainMenuScript.ts","./MoneyPanelScript.ts","./MovesPanelScript.ts","./PauseButtonPanelScript.ts","./ProgressPanelScript.ts","./ScorePanelScript.ts","./ScreenSizeTracker.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainMenuScript.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,t,a,i,o,c,s,l,u,p,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.Node,s=e.ProgressBar,l=e.Vec3,u=e.tween,p=e.director,g=e.Component}],execute:function(){var f,m,M,b,d,P,h,L,v,S,w;i._RF.push({},"15db92rGiJP26Akk78cqc6I","MainMenuScript",void 0);var y=o.ccclass,I=o.property;e("MainMenuScript",(f=y("MainMenuScript"),m=I(c),M=I(c),b=I(c),d=I(s),f((L=n((h=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,t(n,"mainMenuLogo",L,a(n)),t(n,"mainMenuPanel",v,a(n)),t(n,"screenLoaderPanel",S,a(n)),t(n,"progressBar",w,a(n)),n.onPorogressLoadScreene=function(e,r,t){n.progressBar.progress=e/r},n}r(n,e);var i=n.prototype;return i.start=function(){var e=this.mainMenuLogo.getPosition().clone();this.mainMenuLogo.setScale(new l(1,1,1)),this.mainMenuLogo.setPosition(this.mainMenuLogo.getPosition().add(new l(0,200,0))),u(this.mainMenuLogo).to(.4,{position:e},{easing:"backOut"}).call((function(){})).start(),this.mainMenuPanel.setScale(new l),u(this.mainMenuPanel).to(.4,{scale:new l(1,1,1)},{easing:"backOut"}).call((function(){})).start()},i.startGame=function(){var e=this;u(this.mainMenuLogo).to(.4,{scale:new l(0,0,1)},{easing:"backIn"}).call((function(){})).start(),u(this.mainMenuPanel).to(.4,{scale:new l(0,0,1)},{easing:"backIn"}).call((function(){e.screenLoaderPanel.active=!0,e.progressBar.progress=0,p.preloadScene("InGameScene",e.onPorogressLoadScreene,(function(n,r){var t=setInterval((function(){clearInterval(t),e.screenLoaderPanel.active=!1,p.loadScene("InGameScene")}),500)}))})).start()},n}(g)).prototype,"mainMenuLogo",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(h.prototype,"mainMenuPanel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(h.prototype,"screenLoaderPanel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(h.prototype,"progressBar",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=h))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyPanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HiddenPanel.ts"],(function(e){var t,n,r,i,l,a,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,o=e.Label},function(e){c=e.HiddenPanel}],execute:function(){var s,p,u,y,f;l._RF.push({},"e7fcdQI/X1LK4EypXeKNgSX","MoneyPanelScript",void 0);var d=a.ccclass,b=a.property;e("MoneyPanelScript",(s=d("MoneyPanelScript"),p=b(o),s((f=t((y=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,r(t,"label",f,i(t)),t}return n(t,e),t.prototype.setValue=function(e){this.label.string=e.toString()},t}(c)).prototype,"label",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=y))||u));l._RF.pop()}}}));

System.register("chunks:///_virtual/MovesPanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HiddenPanel.ts"],(function(e){var t,r,n,i,l,a,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,o=e.Label},function(e){c=e.HiddenPanel}],execute:function(){var s,p,u,f,d;l._RF.push({},"a346dZQtlpBQZfpNmD8t2l+","MovesPanelScript",void 0);var v=a.ccclass,y=a.property;e("MovesPaneScript",(s=v("MovesPaneScript"),p=y(o),s((d=t((f=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,n(t,"label",d,i(t)),t}return r(t,e),t.prototype.setValue=function(e){this.label.string=e.toString()},t}(c)).prototype,"label",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=f))||u));l._RF.pop()}}}));

System.register("chunks:///_virtual/PauseButtonPanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HiddenPanel.ts"],(function(t){var e,n,r,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){u=t.HiddenPanel}],execute:function(){var c;n._RF.push({},"6e6d5wEFClPe5AMaBn2Jhrw","PauseButtonPanelScript",void 0);var i=r.ccclass;r.property,t("PauseButtonPanelScript",i("PauseButtonPanelScript")(c=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(u))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/ProgressPanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HiddenPanel.ts"],(function(e){var r,t,s,n,o,i,p,c,a,l,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,s=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,p=e.Node,c=e.Vec3,a=e.UITransform,l=e.tween},function(e){u=e.HiddenPanel}],execute:function(){var g,h,d,_,f,w;o._RF.push({},"bd7c4nTtjdEnoxhBN+4ljyV","ProgressPanelScript",void 0);var P=i.ccclass,y=i.property;e("ProgressPanelScript",(g=P("ProgressPanelScript"),h=y(p),g((f=r((_=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o))||this,s(r,"progressNode",f,n(r)),s(r,"tweenSpeed",w,n(r)),r._tween=void 0,r._progressVec=new c,r._progress=0,r._tweenDuration=1,r}t(r,e);var o=r.prototype;return o.setProgress=function(e,r){var t=this.progressNode.getComponent(a).contentSize.width;this._progress=e>100?100:e,this._progressVec.x=t*this._progress/100-t/2,this._tweenDuration=(this._progressVec.x-this.progressNode.getPosition().x)/this.tweenSpeed,r?(this._tween&&this._tween.stop(),this._tween=l(this.progressNode).to(this._tweenDuration,{position:new c(this._progressVec)},{easing:"linear"}).call((function(){})).start()):this.progressNode.setPosition(this._progressVec)},o.getProgress=function(){return this._progress},r}(u)).prototype,"progressNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=r(_.prototype,"tweenSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),d=_))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/RangeValue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,i,t,n;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var a,o,u,l,c,s;t._RF.push({},"0658400ZYlJMJSlUWhRUk1d","RangeValue",void 0);var p=n.ccclass,f=n.property;e("RangeValue",p("RangeValue")((u=r((o=function(){i(this,"min",u,this),i(this,"max",l,this),i(this,"trueIfMoreMax",c,this),i(this,"reward",s,this)}).prototype,"min",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=r(o.prototype,"max",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=r(o.prototype,"trueIfMoreMax",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=r(o.prototype,"reward",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=o))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/RangeVerifier.ts",["cc"],(function(e){var r,n;return{setters:[function(e){r=e.cclegacy,n=e._decorator}],execute:function(){var i;r._RF.push({},"05b144CqHVBia8XlvxBCH0b","RangeVerifier",void 0);var t=n.ccclass;n.property,e("RangeVerifier",t("RangeVerifier")(i=function(){function e(){}return e.verify=function(e,r){return!!(r.trueIfMoreMax&&e>=r.max||e>=r.min&&e<=r.max)},e}())||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/RectangleGrid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Grid.ts","./Enumerations.ts"],(function(i){var t,e,n,s,o,r;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,n=i._decorator,s=i.Vec2},function(i){o=i.Grid},function(i){r=i.Position}],execute:function(){var h;e._RF.push({},"7b53ci+OeVHiJ4fg8PSsMJB","RectangleGrid",void 0);var c=n.ccclass;n.property,i("RectangleGrid",c("RectangleGrid")(h=function(i){function e(t,e,n){var s;return(s=i.call(this,t,e,n)||this).initialize(),s}t(e,i);var n=e.prototype;return n.gridToScreen=function(i){var t=new s;return t.x=this._originPosition.x+i.x*(this._cell.width+this._gap.x),t.y=this._originPosition.y+i.y*(this._cell.height+this._gap.y),t},n.screenToGrid=function(i){var t=new s;switch(t.x=Math.floor((i.x-this._originPosition.x)/(this._cell.width+this._gap.x)),t.y=Math.floor((i.y-this._originPosition.y)/(this._cell.height+this._gap.y)),this._position=this.isPointInside(i,this.gridToScreen(t)),this._position){case r.IN:return[r.IN,t];case r.OUT:default:return[r.OUT,null]}},n.setNeighbors=function(){this.neighbors.set(r.L,new s(-1,0)),this.neighbors.set(r.T,new s(0,1)),this.neighbors.set(r.R,new s(1,0)),this.neighbors.set(r.B,new s(0,-1)),this.diagonals.set(r.LB,new s(-1,-1)),this.diagonals.set(r.LT,new s(-1,1)),this.diagonals.set(r.RT,new s(1,1)),this.diagonals.set(r.RB,new s(1,-1))},n.calculateGridSpecificPrameters=function(){},n.getCellNeighbor=function(i,t){return this.getNeighbor(i,t)},n.getCellNeighbors=function(i){return this.getNeighbors(i)},e}(o))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/ScorePanelScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HiddenPanel.ts"],(function(e){var l,t,i,n,r,a,c,o;return{setters:[function(e){l=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Label},function(e){o=e.HiddenPanel}],execute:function(){var u,s,p,b,h,S,f;r._RF.push({},"339682Evz9JSYB8+HRKOJ+z","ScorePanelScript",void 0);var d=a.ccclass,v=a.property;e("ScorePanelScript",(u=d("ScorePanelScript"),s=v(c),p=v(c),u((S=l((h=function(e){function l(){for(var l,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return l=e.call.apply(e,[this].concat(r))||this,i(l,"labelLevel",S,n(l)),i(l,"labelScore",f,n(l)),l._nextCallback=null,l._menuCallback=null,l}t(l,e);var r=l.prototype;return r.init=function(e,l,t,i){this._nextCallback=t,this._menuCallback=i,this.labelLevel.string=e.toString(),this.labelScore.string=l.toString()},r.onNextClick=function(){this.hideWithScale(this._nextCallback)},r.onMenuClick=function(){this.hideWithScale(this._menuCallback)},l}(o)).prototype,"labelLevel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=l(h.prototype,"labelScore",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=h))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenSizeTracker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,r,s,o,c;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,r=e.view,s=e.screen,o=e.ResolutionPolicy,c=e.Component}],execute:function(){var a;t._RF.push({},"2b7a6OfgalJyImg6uK7IZf6","ScreenSizeTracker",void 0);var h=n.ccclass;n.property,e("ScreenSizeTracker",h("ScreenSizeTracker")(a=function(e){function t(){for(var i,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(i=e.call.apply(e,[this].concat(n))||this)._designWidth=1280,i._designHeight=960,i}i(t,e);var n=t.prototype;return n.start=function(){this.onResize(),r.on("canvas-resize",this.onResize,this)},n.onDestroy=function(){r.off("canvas-resize",this.onResize,this)},n.onResize=function(){var e=s.windowSize,i=Math.max(this._designWidth/e.width,this._designHeight/e.height),t=e.width*i,n=e.height*i;r.setDesignResolutionSize(t,n,o.SHOW_ALL)},t}(c))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/Shape.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,s,o;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy,s=t._decorator,o=t.Vec2}],execute:function(){var e;n._RF.push({},"02da3ElZ+dMiIwzD/ylVuf6","Shape",void 0);var r=s.ccclass;s.property,t("Shape",r("Shape")(e=function(){function t(){this._positions=new Array,this._lb=null,this._rt=null}var n=t.prototype;return n.add=function(t){this._positions.push(t)},n.insert=function(t,i){this._positions.splice(t,0,i)},n.addIfNot=function(t){var i=!1;this._positions.forEach((function(n){n.equals(t)&&(i=!0)})),i||this._positions.push(t)},n.addRow=function(t,i,n){for(var s=-i;s<=i;s++)this._positions.push(new o(t.x+s,t.y+n))},n.get=function(){return this._positions},n.getSize=function(){return this._positions.length},n.isInShape=function(t){return t.x>=this._lb.x&&t.x<=this._rt.x&&t.y>=this._lb.y&&t.y<=this._rt.y},i(t,[{key:"lb",get:function(){return this._lb},set:function(t){this._lb=t}},{key:"rt",get:function(){return this._rt},set:function(t){this._rt=t}}]),t}())||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/ShapeBuilder.ts",["cc","./Shape.ts","./Enumerations.ts"],(function(e){var n,r,t,a,c;return{setters:[function(e){n=e.cclegacy,r=e._decorator,t=e.Vec2},function(e){a=e.Shape},function(e){c=e.Position}],execute:function(){var o;n._RF.push({},"ee478nqnRtMtptku/c9gAv6","ShapeBuilder",void 0);var l=r.ccclass;r.property,e("ShapeBuilder",l("ShapeBuilder")(o=function(){function e(){}return e.getRectangle=function(e,n,r){var o=new a,l=r.x,u=r.y,i=l*u,s=e.clone(),d=1,f=1;switch(n){case c.C:s.set(e.x-Math.floor(l/2),e.y-Math.floor(u/2)),o.lb=new t(s),o.rt=new t(s.clone().add(r.clone().subtract2f(1,1)));break;case c.RT:o.lb=new t(s),o.rt=new t(s.clone().add(r.clone().subtract2f(1,1)));break;case c.RB:f=-1,o.lb=new t(s.x,s.y-r.y+1),o.rt=new t(s.x+r.x-1,s.y);break;case c.LT:d=-1,o.lb=new t(s.x-r.x+1,s.y),o.rt=new t(s.x,s.y+r.y-1);break;case c.LB:d=-1,f=-1,o.lb=new t(s.x-r.x+1,s.y-r.y+1),o.rt=new t(s)}for(var w=0;w<i;w++)o.add(new t(s.x+w%l*d,s.y+Math.floor(w/l)*f));return o},e.getMidpointCircle=function(e,n){var r=new a;if(0==n)r.add(e.clone());else{var t=Array.from(Array(n+1).keys()),c=0,o=n,l=1-n;for(t[o]=c,t[c]=o;o>c;)l<0?l+=2*c+3:(l+=2*(c-o)+5,o--),++c>t[o]&&(t[o]=c),o>t[c]&&(t[c]=o);for(o=n;o>=1;o--)r.addRow(e.clone(),t[o],-o);for(r.addRow(e.clone(),t[0],0),o=1;o<=n;o++)r.addRow(e.clone(),t[o],o)}return r},e}())||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["cc"],(function(e){var t,i,o,s;return{setters:[function(e){t=e.cclegacy,i=e._decorator,o=e.Label,s=e.Vec3}],execute:function(){var n;t._RF.push({},"b9f50+MZAZCIqYZAR3U7aDF","Tile",void 0);var c=i.ccclass;i.property,e("Tile",c("Tile")(n=function(){function e(){this.node=null,this.pos=null,this.type=-1,this.tween=void 0,this._blockScale=new s(.5,.5,1),this._blockSelectedScale=new s(.45,.45,1),this._blockPos=new s}var t=e.prototype;return t.updateLabel=function(e){void 0===e&&(e=""),this.node.getChildByName("Label").getComponent(o).string=this.pos.toString()+" / "+e},t.init=function(){this.node.getChildByName("Label").active=!1,this.node.active=!0,this._blockPos=this.node.getPosition().clone(),this.setSelected(!1)},t.setSelected=function(e){void 0===e&&(e=!1),e?(this._blockPos=this.node.getPosition().clone(),this.node.setScale(this._blockSelectedScale),this.node.setPosition(this._blockPos.clone().add(new s(5,5,0)))):(this.node.setScale(this._blockScale),this.node.setPosition(this._blockPos))},e}())||n);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});